"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = _default;

function _default(route) {
  route.get('/whoami', (req, res, next) => {
    if (req.get('referer') === 'whoami') {
      next({
        username: req.remote_user.name
      });
    } else {
      next('route');
    }
  });
  route.get('/-/whoami', (req, res, next) => {
    next({
      username: req.remote_user.name
    });
  });
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3NyYy9hcGkvZW5kcG9pbnQvYXBpL3dob2FtaS50cyJdLCJuYW1lcyI6WyJyb3V0ZSIsImdldCIsInJlcSIsInJlcyIsIm5leHQiLCJ1c2VybmFtZSIsInJlbW90ZV91c2VyIiwibmFtZSJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUdlLGtCQUFVQSxLQUFWLEVBQStCO0FBQzVDQSxFQUFBQSxLQUFLLENBQUNDLEdBQU4sQ0FBVSxTQUFWLEVBQXFCLENBQUNDLEdBQUQsRUFBc0JDLEdBQXRCLEVBQXFDQyxJQUFyQyxLQUFzRTtBQUN6RixRQUFJRixHQUFHLENBQUNELEdBQUosQ0FBUSxTQUFSLE1BQXVCLFFBQTNCLEVBQXFDO0FBQ25DRyxNQUFBQSxJQUFJLENBQUM7QUFBRUMsUUFBQUEsUUFBUSxFQUFFSCxHQUFHLENBQUNJLFdBQUosQ0FBZ0JDO0FBQTVCLE9BQUQsQ0FBSjtBQUNELEtBRkQsTUFFTztBQUNMSCxNQUFBQSxJQUFJLENBQUMsT0FBRCxDQUFKO0FBQ0Q7QUFDRixHQU5EO0FBUUFKLEVBQUFBLEtBQUssQ0FBQ0MsR0FBTixDQUFVLFdBQVYsRUFBdUIsQ0FBQ0MsR0FBRCxFQUFzQkMsR0FBdEIsRUFBcUNDLElBQXJDLEtBQXFFO0FBQzFGQSxJQUFBQSxJQUFJLENBQUM7QUFBRUMsTUFBQUEsUUFBUSxFQUFFSCxHQUFHLENBQUNJLFdBQUosQ0FBZ0JDO0FBQTVCLEtBQUQsQ0FBSjtBQUNELEdBRkQ7QUFHRCIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFJlc3BvbnNlLCBSb3V0ZXIgfSBmcm9tICdleHByZXNzJztcbmltcG9ydCB7ICRSZXF1ZXN0RXh0ZW5kLCAkTmV4dEZ1bmN0aW9uVmVyIH0gZnJvbSAnLi4vLi4vLi4vLi4vdHlwZXMnO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiAocm91dGU6IFJvdXRlcik6IHZvaWQge1xuICByb3V0ZS5nZXQoJy93aG9hbWknLCAocmVxOiAkUmVxdWVzdEV4dGVuZCwgcmVzOiBSZXNwb25zZSwgbmV4dDogJE5leHRGdW5jdGlvblZlcik6IHZvaWQgPT4ge1xuICAgIGlmIChyZXEuZ2V0KCdyZWZlcmVyJykgPT09ICd3aG9hbWknKSB7XG4gICAgICBuZXh0KHsgdXNlcm5hbWU6IHJlcS5yZW1vdGVfdXNlci5uYW1lIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBuZXh0KCdyb3V0ZScpO1xuICAgIH1cbiAgfSk7XG5cbiAgcm91dGUuZ2V0KCcvLS93aG9hbWknLCAocmVxOiAkUmVxdWVzdEV4dGVuZCwgcmVzOiBSZXNwb25zZSwgbmV4dDogJE5leHRGdW5jdGlvblZlcik6IGFueSA9PiB7XG4gICAgbmV4dCh7IHVzZXJuYW1lOiByZXEucmVtb3RlX3VzZXIubmFtZSB9KTtcbiAgfSk7XG59XG4iXX0=