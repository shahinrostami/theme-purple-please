"use strict";

var _clipanion = require("clipanion");

var _info = require("./commands/info");

var _init = require("./commands/init");

var _utils = require("./utils");

var _version = require("./commands/version");

require('pkginfo')(module);

const pkgVersion = module.exports.version;

if (process.getuid && process.getuid() === 0) {
  process.emitWarning(`Verdaccio doesn't need superuser privileges. don't run it under root`);
}

if (!(0, _utils.isVersionValid)(process.version)) {
  throw new Error(`Verdaccio requires at least Node.js v${_utils.MIN_NODE_VERSION} or higher and you have installed ${process.version}, 
    please upgrade your Node.js distribution`);
}

const [node, app, ...args] = process.argv;
const cli = new _clipanion.Cli({
  binaryLabel: `verdaccio`,
  binaryName: `${node} ${app}`,
  binaryVersion: pkgVersion
});
cli.register(_info.InfoCommand);
cli.register(_init.InitCommand);
cli.register(_version.VersionCommand);
cli.runExit(args, _clipanion.Cli.defaultContext);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9saWIvY2xpL2NsaS50cyJdLCJuYW1lcyI6WyJyZXF1aXJlIiwibW9kdWxlIiwicGtnVmVyc2lvbiIsImV4cG9ydHMiLCJ2ZXJzaW9uIiwicHJvY2VzcyIsImdldHVpZCIsImVtaXRXYXJuaW5nIiwiRXJyb3IiLCJNSU5fTk9ERV9WRVJTSU9OIiwibm9kZSIsImFwcCIsImFyZ3MiLCJhcmd2IiwiY2xpIiwiQ2xpIiwiYmluYXJ5TGFiZWwiLCJiaW5hcnlOYW1lIiwiYmluYXJ5VmVyc2lvbiIsInJlZ2lzdGVyIiwiSW5mb0NvbW1hbmQiLCJJbml0Q29tbWFuZCIsIlZlcnNpb25Db21tYW5kIiwicnVuRXhpdCIsImRlZmF1bHRDb250ZXh0Il0sIm1hcHBpbmdzIjoiOztBQUFBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOztBQUVBQSxPQUFPLENBQUMsU0FBRCxDQUFQLENBQW1CQyxNQUFuQjs7QUFDQSxNQUFNQyxVQUFVLEdBQUdELE1BQU0sQ0FBQ0UsT0FBUCxDQUFlQyxPQUFsQzs7QUFFQSxJQUFJQyxPQUFPLENBQUNDLE1BQVIsSUFBa0JELE9BQU8sQ0FBQ0MsTUFBUixPQUFxQixDQUEzQyxFQUE4QztBQUM1Q0QsRUFBQUEsT0FBTyxDQUFDRSxXQUFSLENBQXFCLHNFQUFyQjtBQUNEOztBQUVELElBQUksQ0FBQywyQkFBZUYsT0FBTyxDQUFDRCxPQUF2QixDQUFMLEVBQXNDO0FBQ3BDLFFBQU0sSUFBSUksS0FBSixDQUNILHdDQUF1Q0MsdUJBQWlCLHFDQUFvQ0osT0FBTyxDQUFDRCxPQUFRO0FBQ2pILDZDQUZRLENBQU47QUFJRDs7QUFFRCxNQUFNLENBQUNNLElBQUQsRUFBT0MsR0FBUCxFQUFZLEdBQUdDLElBQWYsSUFBdUJQLE9BQU8sQ0FBQ1EsSUFBckM7QUFFQSxNQUFNQyxHQUFHLEdBQUcsSUFBSUMsY0FBSixDQUFRO0FBQ2xCQyxFQUFBQSxXQUFXLEVBQUcsV0FESTtBQUVsQkMsRUFBQUEsVUFBVSxFQUFHLEdBQUVQLElBQUssSUFBR0MsR0FBSSxFQUZUO0FBR2xCTyxFQUFBQSxhQUFhLEVBQUVoQjtBQUhHLENBQVIsQ0FBWjtBQU1BWSxHQUFHLENBQUNLLFFBQUosQ0FBYUMsaUJBQWI7QUFDQU4sR0FBRyxDQUFDSyxRQUFKLENBQWFFLGlCQUFiO0FBQ0FQLEdBQUcsQ0FBQ0ssUUFBSixDQUFhRyx1QkFBYjtBQUNBUixHQUFHLENBQUNTLE9BQUosQ0FBWVgsSUFBWixFQUFrQkcsZUFBSVMsY0FBdEIiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDbGkgfSBmcm9tICdjbGlwYW5pb24nO1xuaW1wb3J0IHsgSW5mb0NvbW1hbmQgfSBmcm9tICcuL2NvbW1hbmRzL2luZm8nO1xuaW1wb3J0IHsgSW5pdENvbW1hbmQgfSBmcm9tICcuL2NvbW1hbmRzL2luaXQnO1xuaW1wb3J0IHsgaXNWZXJzaW9uVmFsaWQsIE1JTl9OT0RFX1ZFUlNJT04gfSBmcm9tICcuL3V0aWxzJztcbmltcG9ydCB7IFZlcnNpb25Db21tYW5kIH0gZnJvbSAnLi9jb21tYW5kcy92ZXJzaW9uJztcblxucmVxdWlyZSgncGtnaW5mbycpKG1vZHVsZSk7XG5jb25zdCBwa2dWZXJzaW9uID0gbW9kdWxlLmV4cG9ydHMudmVyc2lvbjtcblxuaWYgKHByb2Nlc3MuZ2V0dWlkICYmIHByb2Nlc3MuZ2V0dWlkKCkgPT09IDApIHtcbiAgcHJvY2Vzcy5lbWl0V2FybmluZyhgVmVyZGFjY2lvIGRvZXNuJ3QgbmVlZCBzdXBlcnVzZXIgcHJpdmlsZWdlcy4gZG9uJ3QgcnVuIGl0IHVuZGVyIHJvb3RgKTtcbn1cblxuaWYgKCFpc1ZlcnNpb25WYWxpZChwcm9jZXNzLnZlcnNpb24pKSB7XG4gIHRocm93IG5ldyBFcnJvcihcbiAgICBgVmVyZGFjY2lvIHJlcXVpcmVzIGF0IGxlYXN0IE5vZGUuanMgdiR7TUlOX05PREVfVkVSU0lPTn0gb3IgaGlnaGVyIGFuZCB5b3UgaGF2ZSBpbnN0YWxsZWQgJHtwcm9jZXNzLnZlcnNpb259LCBcbiAgICBwbGVhc2UgdXBncmFkZSB5b3VyIE5vZGUuanMgZGlzdHJpYnV0aW9uYFxuICApO1xufVxuXG5jb25zdCBbbm9kZSwgYXBwLCAuLi5hcmdzXSA9IHByb2Nlc3MuYXJndjtcblxuY29uc3QgY2xpID0gbmV3IENsaSh7XG4gIGJpbmFyeUxhYmVsOiBgdmVyZGFjY2lvYCxcbiAgYmluYXJ5TmFtZTogYCR7bm9kZX0gJHthcHB9YCxcbiAgYmluYXJ5VmVyc2lvbjogcGtnVmVyc2lvbixcbn0pO1xuXG5jbGkucmVnaXN0ZXIoSW5mb0NvbW1hbmQpO1xuY2xpLnJlZ2lzdGVyKEluaXRDb21tYW5kKTtcbmNsaS5yZWdpc3RlcihWZXJzaW9uQ29tbWFuZCk7XG5jbGkucnVuRXhpdChhcmdzLCBDbGkuZGVmYXVsdENvbnRleHQpO1xuIl19