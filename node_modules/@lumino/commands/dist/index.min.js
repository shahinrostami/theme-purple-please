!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@lumino/algorithm"),require("@lumino/coreutils"),require("@lumino/disposable"),require("@lumino/domutils"),require("@lumino/keyboard"),require("@lumino/signaling")):"function"==typeof define&&define.amd?define(["exports","@lumino/algorithm","@lumino/coreutils","@lumino/disposable","@lumino/domutils","@lumino/keyboard","@lumino/signaling"],t):t((e=e||self).lumino_commands={},e.lumino_algorithm,e.lumino_coreutils,e.lumino_disposable,e.lumino_domutils,e.lumino_keyboard,e.lumino_signaling)}(this,(function(e,t,n,i,o,r,a){"use strict";var s;e.CommandRegistry=function(){function e(){this._timerID=0,this._replaying=!1,this._keystrokes=[],this._keydownEvents=[],this._keyBindings=[],this._exactKeyMatch=null,this._commands=Object.create(null),this._commandChanged=new a.Signal(this),this._commandExecuted=new a.Signal(this),this._keyBindingChanged=new a.Signal(this)}return Object.defineProperty(e.prototype,"commandChanged",{get:function(){return this._commandChanged},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"commandExecuted",{get:function(){return this._commandExecuted},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"keyBindingChanged",{get:function(){return this._keyBindingChanged},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"keyBindings",{get:function(){return this._keyBindings},enumerable:!0,configurable:!0}),e.prototype.listCommands=function(){return Object.keys(this._commands)},e.prototype.hasCommand=function(e){return e in this._commands},e.prototype.addCommand=function(e,t){var n=this;if(e in this._commands)throw new Error("Command '"+e+"' already registered.");return this._commands[e]=s.createCommand(t),this._commandChanged.emit({id:e,type:"added"}),new i.DisposableDelegate((function(){delete n._commands[e],n._commandChanged.emit({id:e,type:"removed"})}))},e.prototype.notifyCommandChanged=function(e){if(void 0!==e&&!(e in this._commands))throw new Error("Command '"+e+"' is not registered.");this._commandChanged.emit({id:e,type:e?"changed":"many-changed"})},e.prototype.label=function(e,t){void 0===t&&(t=n.JSONExt.emptyObject);var i=this._commands[e];return i?i.label.call(void 0,t):""},e.prototype.mnemonic=function(e,t){void 0===t&&(t=n.JSONExt.emptyObject);var i=this._commands[e];return i?i.mnemonic.call(void 0,t):-1},e.prototype.icon=function(e,t){void 0===t&&(t=n.JSONExt.emptyObject);var i=this._commands[e];return i?i.icon.call(void 0,t):""},e.prototype.iconClass=function(e,t){void 0===t&&(t=n.JSONExt.emptyObject);var i=this._commands[e];return i?i.iconClass.call(void 0,t):""},e.prototype.iconLabel=function(e,t){void 0===t&&(t=n.JSONExt.emptyObject);var i=this._commands[e];return i?i.iconLabel.call(void 0,t):""},e.prototype.caption=function(e,t){void 0===t&&(t=n.JSONExt.emptyObject);var i=this._commands[e];return i?i.caption.call(void 0,t):""},e.prototype.usage=function(e,t){void 0===t&&(t=n.JSONExt.emptyObject);var i=this._commands[e];return i?i.usage.call(void 0,t):""},e.prototype.className=function(e,t){void 0===t&&(t=n.JSONExt.emptyObject);var i=this._commands[e];return i?i.className.call(void 0,t):""},e.prototype.dataset=function(e,t){void 0===t&&(t=n.JSONExt.emptyObject);var i=this._commands[e];return i?i.dataset.call(void 0,t):{}},e.prototype.isEnabled=function(e,t){void 0===t&&(t=n.JSONExt.emptyObject);var i=this._commands[e];return!!i&&i.isEnabled.call(void 0,t)},e.prototype.isToggled=function(e,t){void 0===t&&(t=n.JSONExt.emptyObject);var i=this._commands[e];return!!i&&i.isToggled.call(void 0,t)},e.prototype.isToggleable=function(e,t){void 0===t&&(t=n.JSONExt.emptyObject);var i=this._commands[e];return!!i&&i.isToggleable},e.prototype.isVisible=function(e,t){void 0===t&&(t=n.JSONExt.emptyObject);var i=this._commands[e];return!!i&&i.isVisible.call(void 0,t)},e.prototype.execute=function(e,t){void 0===t&&(t=n.JSONExt.emptyObject);var i,o=this._commands[e];if(!o)return Promise.reject(new Error("Command '"+e+"' not registered."));try{i=o.execute.call(void 0,t)}catch(e){i=Promise.reject(e)}var r=Promise.resolve(i);return this._commandExecuted.emit({id:e,args:t,result:r}),r},e.prototype.addKeyBinding=function(e){var n=this,o=s.createKeyBinding(e);return this._keyBindings.push(o),this._keyBindingChanged.emit({binding:o,type:"added"}),new i.DisposableDelegate((function(){t.ArrayExt.removeFirstOf(n._keyBindings,o),n._keyBindingChanged.emit({binding:o,type:"removed"})}))},e.prototype.processKeydownEvent=function(t){if(!this._replaying){var n=e.keystrokeForKeydownEvent(t);if(!n)return this._replayKeydownEvents(),void this._clearPendingState();this._keystrokes.push(n);var i=s.matchKeyBinding(this._keyBindings,this._keystrokes,t),o=i.exact,r=i.partial;if(!o&&!r)return this._replayKeydownEvents(),void this._clearPendingState();if(t.preventDefault(),t.stopPropagation(),o&&!r)return this._executeKeyBinding(o),void this._clearPendingState();o&&(this._exactKeyMatch=o),this._keydownEvents.push(t),this._startTimer()}},e.prototype._startTimer=function(){var e=this;this._clearTimer(),this._timerID=window.setTimeout((function(){e._onPendingTimeout()}),s.CHORD_TIMEOUT)},e.prototype._clearTimer=function(){0!==this._timerID&&(clearTimeout(this._timerID),this._timerID=0)},e.prototype._replayKeydownEvents=function(){0!==this._keydownEvents.length&&(this._replaying=!0,this._keydownEvents.forEach(s.replayKeyEvent),this._replaying=!1)},e.prototype._executeKeyBinding=function(e){var t=e.command,n=e.args;if(this.hasCommand(t)&&this.isEnabled(t,n))this.execute(t,n);else{var i=this.hasCommand(t)?"enabled":"registered",o="Cannot execute key binding '"+e.keys.join(", ")+"':",r="command '"+t+"' is not "+i+".";console.warn(o+" "+r)}},e.prototype._clearPendingState=function(){this._clearTimer(),this._exactKeyMatch=null,this._keystrokes.length=0,this._keydownEvents.length=0},e.prototype._onPendingTimeout=function(){this._timerID=0,this._exactKeyMatch?this._executeKeyBinding(this._exactKeyMatch):this._replayKeydownEvents(),this._clearPendingState()},e}(),function(e){function t(e){for(var t="",n=!1,i=!1,r=!1,a=!1,s=0,c=e.split(/\s+/);s<c.length;s++){var l=c[s];"Accel"===l?o.Platform.IS_MAC?i=!0:r=!0:"Alt"===l?n=!0:"Cmd"===l?i=!0:"Ctrl"===l?r=!0:"Shift"===l?a=!0:l.length>0&&(t=l)}return{cmd:i,ctrl:r,alt:n,shift:a,key:t}}function n(e){var n="",i=t(e);return i.ctrl&&(n+="Ctrl "),i.alt&&(n+="Alt "),i.shift&&(n+="Shift "),i.cmd&&o.Platform.IS_MAC&&(n+="Cmd "),n+i.key}e.parseKeystroke=t,e.normalizeKeystroke=n,e.normalizeKeys=function(e){return(o.Platform.IS_WIN?e.winKeys||e.keys:o.Platform.IS_MAC?e.macKeys||e.keys:e.linuxKeys||e.keys).map(n)},e.formatKeystroke=function(e){var n="",i=t(e);return o.Platform.IS_MAC?(i.ctrl&&(n+="⌃ "),i.alt&&(n+="⌥ "),i.shift&&(n+="⇧ "),i.cmd&&(n+="⌘ ")):(i.ctrl&&(n+="Ctrl+"),i.alt&&(n+="Alt+"),i.shift&&(n+="Shift+")),n+i.key},e.keystrokeForKeydownEvent=function(e){var t=r.getKeyboardLayout().keyForKeydownEvent(e);if(!t)return"";var n="";return e.ctrlKey&&(n+="Ctrl "),e.altKey&&(n+="Alt "),e.shiftKey&&(n+="Shift "),e.metaKey&&o.Platform.IS_MAC&&(n+="Cmd "),n+t}}(e.CommandRegistry||(e.CommandRegistry={})),function(t){t.CHORD_TIMEOUT=1e3,t.createCommand=function(e){var t,n;return e.icon&&"string"!=typeof e.icon?(n=d(e.iconClass,i),t=d(e.icon,l)):t=n=d(e.iconClass||e.icon,i),{execute:e.execute,label:d(e.label,i),mnemonic:d(e.mnemonic,r),icon:t,iconClass:n,iconLabel:d(e.iconLabel,i),caption:d(e.caption,i),usage:d(e.usage,i),className:d(e.className,i),dataset:d(e.dataset,c),isEnabled:e.isEnabled||a,isToggled:e.isToggled||s,isToggleable:e.isToggleable||!!e.isToggled,isVisible:e.isVisible||a}},t.createKeyBinding=function(t){return{keys:e.CommandRegistry.normalizeKeys(t),selector:m(t),command:t.command,args:t.args||n.JSONExt.emptyObject}},t.matchKeyBinding=function(e,t,n){for(var i=null,r=!1,a=1/0,s=0,c=0,l=e.length;c<l;++c){var d=e[c],m=u(d.keys,t);if(0!==m)if(2!==m){var h=y(d.selector,n);if(!(-1===h||h>a)){var p=o.Selector.calculateSpecificity(d.selector);(!i||h<a||p>=s)&&(i=d,a=h,s=p)}}else r||-1===y(d.selector,n)||(r=!0)}return{exact:i,partial:r}},t.replayKeyEvent=function(e){e.target.dispatchEvent(function(e){var t=document.createEvent("Event"),n=e.bubbles||!0,i=e.cancelable||!0;return t.initEvent(e.type||"keydown",n,i),t.key=e.key||"",t.keyCode=e.keyCode||0,t.which=e.keyCode||0,t.ctrlKey=e.ctrlKey||!1,t.altKey=e.altKey||!1,t.shiftKey=e.shiftKey||!1,t.metaKey=e.metaKey||!1,t.view=e.view||window,t}(e))};var i=function(){return""},r=function(){return-1},a=function(){return!0},s=function(){return!1},c=function(){return{}},l=function(){};function d(e,t){return void 0===e?t:"function"==typeof e?e:function(){return e}}function m(e){if(-1!==e.selector.indexOf(","))throw new Error("Selector cannot contain commas: "+e.selector);if(!o.Selector.isValid(e.selector))throw new Error("Invalid selector: "+e.selector);return e.selector}function u(e,t){if(e.length<t.length)return 0;for(var n=0,i=t.length;n<i;++n)if(e[n]!==t[n])return 0;return e.length>t.length?2:1}function y(e,t){for(var n=t.target,i=t.currentTarget,r=0;null!==n;n=n.parentElement,++r){if(n.hasAttribute("data-lm-suppress-shortcuts"))return-1;if(n.hasAttribute("data-p-suppress-shortcuts"))return-1;if(o.Selector.matches(n,e))return r;if(n===i)return-1}return-1}}(s||(s={})),Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=index.min.js.map